<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Switchblade Steganography</title>
        <style>
            :root {
                --neon-pink: #ff2a6d;
                --neon-blue: #00fff9;
                --neon-purple: #8a2be2;
                --dark-bg: #0a0a20;
                --darker-bg: #050510;
                --cyber-green: #39ff14;
            }

            @keyframes flicker {
                0%,
                19.999%,
                22%,
                62.999%,
                64%,
                64.999%,
                70%,
                100% {
                    opacity: 1;
                }
                20%,
                21.999%,
                63%,
                63.999%,
                65%,
                69.999% {
                    opacity: 0.4;
                }
            }

            @keyframes glow {
                0% {
                    box-shadow:
                        0 0 5px var(--neon-blue),
                        0 0 10px var(--neon-blue);
                }
                100% {
                    box-shadow:
                        0 0 10px var(--neon-blue),
                        0 0 20px var(--neon-blue);
                }
            }

            body {
                font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
                background-color: var(--dark-bg);
                color: #fff;
                margin: 0;
                padding: 20px;
                min-height: 100vh;
                background: linear-gradient(
                    45deg,
                    var(--darker-bg),
                    var(--dark-bg)
                );
            }

            .container {
                max-width: 800px;
                margin: 0 auto;
                padding: 20px;
                border: 1px solid var(--neon-blue);
                border-radius: 10px;
                box-shadow: 0 0 20px rgba(0, 255, 249, 0.2);
                background: rgba(10, 10, 32, 0.9);
            }

            h1 {
                color: var(--neon-pink);
                text-align: center;
                text-transform: uppercase;
                letter-spacing: 3px;
                margin-bottom: 30px;
                animation: flicker 3s infinite;
                text-shadow: 0 0 10px var(--neon-pink);
            }

            .tab-container {
                display: flex;
                gap: 10px;
                margin-bottom: 20px;
            }

            .tab-button {
                flex: 1;
                padding: 10px;
                background: transparent;
                border: 1px solid var(--neon-blue);
                color: var(--neon-blue);
                cursor: pointer;
                transition: all 0.3s ease;
                text-transform: uppercase;
                letter-spacing: 1px;
                animation: glow 2s infinite alternate;
                border-radius: 5px;
            }

            .tab-button.active {
                background: var(--neon-blue);
                color: var(--darker-bg);
            }

            .tab-content {
                display: none;
                padding: 20px;
                border: 1px solid var(--neon-blue);
                border-radius: 5px;
                margin-top: 20px;
                animation: glow 2s infinite alternate;
            }

            .tab-content.active {
                display: block;
            }

            .sub-tab-content {
                display: none;
                padding: 20px;
                border: 1px solid var(--neon-blue);
                border-radius: 5px;
                margin-top: 20px;
            }

            .sub-tab-content.active {
                display: block;
            }

            .input-group {
                margin-bottom: 20px;
            }

            .label {
                display: block;
                color: var(--neon-blue);
                margin-bottom: 5px;
                text-transform: uppercase;
                letter-spacing: 1px;
                font-size: 0.9em;
            }

            input[type="text"],
            input[type="password"],
            textarea {
                width: 100%;
                padding: 10px;
                background: var(--darker-bg);
                border: 1px solid var(--neon-blue);
                color: #fff;
                border-radius: 5px;
                margin-top: 5px;
                font-family: inherit;
                box-sizing: border-box;
            }

            textarea {
                min-height: 100px;
                resize: vertical;
            }

            .button-group {
                display: flex;
                gap: 10px;
                justify-content: center;
                margin-top: 20px;
            }

            .button {
                padding: 12px 24px;
                background: transparent;
                border: 1px solid var(--neon-blue);
                color: var(--neon-blue);
                cursor: pointer;
                transition: all 0.3s ease;
                text-transform: uppercase;
                letter-spacing: 1px;
                border-radius: 5px;
                font-weight: bold;
            }

            .button:hover {
                background: var(--neon-blue);
                color: var(--darker-bg);
                box-shadow: 0 0 15px var(--neon-blue);
            }

            .preview-container {
                margin: 20px 0;
                text-align: center;
                border: 1px dashed var(--neon-blue);
                padding: 10px;
                border-radius: 5px;
            }

            .preview-image {
                max-width: 100%;
                max-height: 300px;
                border-radius: 5px;
            }

            .result {
                margin-top: 20px;
                padding: 15px;
                border-radius: 5px;
                display: none;
                font-weight: bold;
                text-align: center;
                word-break: break-word;
            }

            .result.success {
                display: block;
                border: 1px solid var(--cyber-green);
                color: var(--cyber-green);
                background: rgba(57, 255, 20, 0.1);
            }

            .result.error {
                display: block;
                border: 1px solid var(--neon-pink);
                color: var(--neon-pink);
                background: rgba(255, 42, 109, 0.1);
            }

            .file-input {
                width: 100%;
                position: relative;
            }

            .file-input input[type="file"] {
                width: 100%;
                padding: 10px;
                background: var(--darker-bg);
                border: 1px solid var(--neon-blue);
                color: #fff;
                border-radius: 5px;
                cursor: pointer;
            }

            .loading {
                display: none;
                text-align: center;
                margin: 10px 0;
                color: var(--neon-blue);
            }

            .loading.active {
                display: block;
            }

            .download-link {
                display: inline-block;
                margin-top: 10px;
                color: var(--cyber-green);
                text-decoration: none;
                padding: 5px 10px;
                border: 1px solid var(--cyber-green);
                border-radius: 3px;
                transition: all 0.3s ease;
            }

            .download-link:hover {
                background: var(--cyber-green);
                color: var(--darker-bg);
            }

            @media (max-width: 600px) {
                .container {
                    padding: 10px;
                }
                .tab-container {
                    flex-direction: column;
                }
                .button-group {
                    flex-direction: column;
                }
                .button {
                    width: 100%;
                }
            }

            .loading-status {
                text-align: center;
                padding: 10px;
            }

            .status-message {
                color: var(--neon-blue);
                margin-bottom: 10px;
            }

            .loading-animation {
                display: inline-block;
                width: 50px;
                height: 50px;
                border: 3px solid rgba(0, 255, 249, 0.3);
                border-radius: 50%;
                border-top-color: var(--neon-blue);
                animation: spin 1s ease-in-out infinite;
            }

            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }
            .emoji-dropdown {
                max-height: 200px;
                overflow-y: auto;
                background: var(--darker-bg);
                border: 1px solid var(--neon-blue);
                border-radius: 5px;
                margin-top: 10px;
                display: grid;
                grid-template-columns: repeat(8, 1fr);
                gap: 5px;
                padding: 10px;
            }

            .emoji-item {
                font-size: 1.5em;
                cursor: pointer;
                padding: 5px;
                text-align: center;
                transition: all 0.2s;
                border-radius: 3px;
            }

            .emoji-item:hover {
                background: rgba(0, 255, 249, 0.2);
                transform: scale(1.1);
            }

            .emoji-category {
                display: flex;
                gap: 5px;
                flex-wrap: wrap;
                margin-bottom: 10px;
            }

            .category-btn {
                background: transparent;
                border: 1px solid var(--neon-blue);
                color: var(--neon-blue);
                border-radius: 3px;
                padding: 5px 10px;
                cursor: pointer;
                font-size: 0.9em;
                transition: all 0.3s;
            }

            .category-btn:hover,
            .category-btn.active {
                background: var(--neon-blue);
                color: var(--darker-bg);
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>Switchblade Steganography</h1>

            <div class="tab-container">
                <button class="tab-button active" onclick="switchTab('emoji')">
                    Emoji/Character
                </button>
                <button class="tab-button" onclick="switchTab('image')">
                    Image Message
                </button>
                <button class="tab-button" onclick="switchTab('file')">
                    Hide File
                </button>
            </div>

            <!-- Emoji Steganography Tab -->
            <div id="emoji-tab" class="tab-content active">
                <div class="tab-container">
                    <button
                        class="tab-button active"
                        onclick="switchSubTab('emoji', 'encode')"
                    >
                        Encode
                    </button>
                    <button
                        class="tab-button"
                        onclick="switchSubTab('emoji', 'decode')"
                    >
                        Decode
                    </button>
                </div>

                <div id="emoji-encode-tab" class="sub-tab-content active">
                    <div class="input-group">
                        <label class="label">Carrier Emoji/Character</label>
                        <input
                            type="text"
                            id="emoji-carrier-encode"
                            placeholder="Enter an emoji or character"
                        />
                        <div class="emoji-category">
                            <button
                                class="category-btn active"
                                data-category="smileys"
                            >
                                Smileys
                            </button>
                            <button
                                class="category-btn"
                                data-category="animals"
                            >
                                Animals
                            </button>
                            <button class="category-btn" data-category="food">
                                Food
                            </button>
                            <button
                                class="category-btn"
                                data-category="activities"
                            >
                                Activities
                            </button>
                            <button class="category-btn" data-category="travel">
                                Travel
                            </button>
                            <button
                                class="category-btn"
                                data-category="objects"
                            >
                                Objects
                            </button>
                            <button
                                class="category-btn"
                                data-category="symbols"
                            >
                                Symbols
                            </button>
                            <button class="category-btn" data-category="flags">
                                Flags
                            </button>
                        </div>
                        <div class="emoji-dropdown" id="emoji-dropdown"></div>
                    </div>
                    <div class="input-group">
                        <label class="label">Message</label>
                        <textarea
                            id="emoji-message"
                            placeholder="Enter your message to hide"
                        ></textarea>
                    </div>
                    <div class="button-group">
                        <button class="button" onclick="encodeEmoji()">
                            Encode
                        </button>
                    </div>
                    <div id="emoji-encode-result" class="result"></div>
                </div>

                <div id="emoji-decode-tab" class="sub-tab-content">
                    <div class="input-group">
                        <label class="label">Encoded Text</label>
                        <input
                            type="text"
                            id="emoji-carrier-decode"
                            placeholder="Enter the encoded text"
                        />
                    </div>
                    <div class="button-group">
                        <button class="button" onclick="decodeEmoji()">
                            Decode
                        </button>
                    </div>
                    <div id="emoji-decode-result" class="result"></div>
                </div>
            </div>

            <!-- Image Message Tab -->
            <div id="image-tab" class="tab-content">
                <div class="tab-container">
                    <button
                        class="tab-button active"
                        onclick="switchSubTab('image', 'encode')"
                    >
                        Encode
                    </button>
                    <button
                        class="tab-button"
                        onclick="switchSubTab('image', 'decode')"
                    >
                        Decode
                    </button>
                </div>

                <div id="image-encode-tab" class="sub-tab-content active">
                    <div class="input-group">
                        <label class="label">Image</label>
                        <input
                            type="file"
                            accept="image/*"
                            id="image-file-encode"
                            class="file-input"
                        />
                    </div>
                    <div class="input-group">
                        <label class="label">Message</label>
                        <textarea
                            id="image-message"
                            placeholder="Enter your message to hide"
                        ></textarea>
                    </div>
                    <div class="input-group">
                        <label class="label">Password</label>
                        <input type="password" id="image-password-encode" />
                    </div>
                    <div
                        class="preview-container"
                        style="
                            display: flex;
                            gap: 20px;
                            justify-content: center;
                        "
                    >
                        <div>
                            <div class="label">Encoded Image</div>
                            <img
                                id="image-preview-encode-result"
                                class="preview-image"
                                style="display: none"
                            />
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="button" onclick="encodeImage()">
                            Encode
                        </button>
                    </div>
                    <div id="image-encode-result" class="result"></div>
                </div>

                <div id="image-decode-tab" class="sub-tab-content">
                    <div class="input-group">
                        <label class="label">Encoded Image</label>
                        <input
                            type="file"
                            accept="image/*"
                            id="image-file-decode"
                            class="file-input"
                        />
                    </div>
                    <div class="input-group">
                        <label class="label">Password</label>
                        <input type="password" id="image-password-decode" />
                    </div>
                    <div class="preview-container">
                        <img
                            id="image-preview-decode"
                            class="preview-image"
                            style="display: none"
                        />
                    </div>
                    <div class="button-group">
                        <button class="button" onclick="decodeImage()">
                            Decode
                        </button>
                    </div>
                    <div id="image-decode-result" class="result"></div>
                </div>
            </div>

            <!-- File in Image Tab -->
            <div id="file-tab" class="tab-content">
                <div class="tab-container">
                    <button
                        class="tab-button active"
                        onclick="switchSubTab('file', 'encode')"
                    >
                        Encode
                    </button>
                    <button
                        class="tab-button"
                        onclick="switchSubTab('file', 'decode')"
                    >
                        Decode
                    </button>
                </div>

                <div id="file-encode-tab" class="sub-tab-content active">
                    <div class="input-group">
                        <label class="label">Carrier Image</label>
                        <input
                            type="file"
                            accept="image/jpeg,image/png"
                            id="carrier-file-encode"
                            class="file-input"
                        />
                    </div>
                    <div class="input-group">
                        <label class="label">File to Hide</label>
                        <input type="file" id="hide-file" class="file-input" />
                    </div>
                    <div
                        class="preview-container"
                        style="
                            display: flex;
                            gap: 20px;
                            justify-content: center;
                        "
                    >
                        <div>
                            <div class="label">Original Image</div>
                            <img
                                id="file-preview-encode-original"
                                class="preview-image"
                                style="display: none"
                            />
                        </div>
                        <div>
                            <div class="label">Encoded Image</div>
                            <img
                                id="file-preview-encode-result"
                                class="preview-image"
                                style="display: none"
                            />
                        </div>
                    </div>
                    <div class="button-group">
                        <button class="button" onclick="encodeFile()">
                            Encode
                        </button>
                    </div>
                    <div id="file-encode-result" class="result"></div>
                </div>

                <div id="file-decode-tab" class="sub-tab-content">
                    <div class="input-group">
                        <label class="label">Encoded Image</label>
                        <input
                            type="file"
                            accept="image/*"
                            id="carrier-file-decode"
                            class="file-input"
                        />
                    </div>
                    <div class="preview-container">
                        <img
                            id="file-preview-decode"
                            class="preview-image"
                            style="display: none"
                        />
                    </div>
                    <div class="button-group">
                        <button class="button" onclick="decodeFile()">
                            Decode
                        </button>
                    </div>
                    <div id="file-decode-result" class="result"></div>
                </div>
            </div>
        </div>

        <script>
        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll(".tab-content")
                .forEach((tab) => tab.classList.remove("active"));
            document.querySelectorAll(".tab-button")
                .forEach((btn) => btn.classList.remove("active"));
            document.getElementById(`${tabName}-tab`).classList.add("active");
            document.querySelector(`button[onclick="switchTab('${tabName}')"]`).classList.add("active");
            // Show encode sub-tab by default
            switchSubTab(tabName, "encode");
        }

        function switchSubTab(tabName, subTabName) {
            const tabContent = document.getElementById(`${tabName}-tab`);
            // Update sub-tab buttons
            tabContent.querySelectorAll(".tab-button")
                .forEach((btn) => btn.classList.remove("active"));
            tabContent.querySelector(`button[onclick="switchSubTab('${tabName}', '${subTabName}')"]`).classList.add("active");
            // Update sub-tab content
            tabContent.querySelectorAll(".sub-tab-content")
                .forEach((tab) => tab.classList.remove("active"));
            document.getElementById(`${tabName}-${subTabName}-tab`).classList.add("active");
        }

        // Clear form data on page refresh
        window.onload = function () {
            document.querySelectorAll("input, textarea")
                .forEach((input) => {
                    input.value = "";
                });
            document.querySelectorAll(".result").forEach((result) => {
                result.style.display = "none";
            });
            document.querySelectorAll(".preview-image").forEach((img) => {
                img.style.display = "none";
            });
        };

        // Image preview functionality
        function setupImagePreview(inputId, previewId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            input.addEventListener("change", function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        preview.src = e.target.result;
                        preview.style.display = "block";
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Set up preview for carrier file and hide file
        document.getElementById("carrier-file-encode")
            .addEventListener("change", function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const preview = document.getElementById("file-preview-encode-original");
                        preview.src = e.target.result;
                        preview.style.display = "block";
                    };
                    reader.readAsDataURL(file);
                }
            });

        document.getElementById("carrier-file-decode")
            .addEventListener("change", function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const preview = document.getElementById("file-preview-decode");
                        preview.src = e.target.result;
                        preview.style.display = "block";
                    };
                    reader.readAsDataURL(file);
                }
            });

        document.getElementById("image-file-encode")
            .addEventListener("change", function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const preview = document.getElementById("image-preview-encode");
                        if (preview) {
                            preview.src = e.target.result;
                            preview.style.display = "block";
                        }
                    };
                    reader.readAsDataURL(file);
                }
            });

        document.getElementById("image-file-decode")
            .addEventListener("change", function (e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function (e) {
                        const preview = document.getElementById("image-preview-decode");
                        preview.src = e.target.result;
                        preview.style.display = "block";
                    };
                    reader.readAsDataURL(file);
                }
            });

        // Show result function
        function showResult(elementId, message, isError = false) {
            const result = document.getElementById(elementId);
            // Check if the message starts with "No hidden message found" or "Error"
            if (message.startsWith("No hidden message found") || message.startsWith("Error")) {
                result.textContent = message;
            } else {
                // For successful decoding, only show the message content
                result.innerHTML = message;
            }
            result.style.display = "block";
            result.className = `result ${isError ? "error" : "success"}`;
        }

        // Emoji Steganography Functions
        async function encodeEmoji() {
            const carrier = document.getElementById("emoji-carrier-encode").value;
            const message = document.getElementById("emoji-message").value;
            try {
                const response = await fetch("/encode_emoji", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ carrier, message }),
                });
                const data = await response.json();
                if (response.ok) {
                    showResult("emoji-encode-result", `Encoded Result: ${data.result}`);
                } else {
                    showResult("emoji-encode-result", data.error, true);
                }
            } catch (error) {
                showResult("emoji-encode-result", "An error occurred during encoding", true);
            }
        }

        async function decodeEmoji() {
            const text = document.getElementById("emoji-carrier-decode").value;
            if (!text) {
                const resultDiv = document.getElementById("emoji-decode-result");
                resultDiv.textContent = "Please enter text to decode";
                resultDiv.style.display = "block";
                resultDiv.className = "result error";
                return;
            }
            try {
                const response = await fetch("/decode_emoji", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({ text }),
                });
                const data = await response.json();
                const resultDiv = document.getElementById("emoji-decode-result");
                if (response.ok) {
                    // Just show the raw message without any prefix
                    resultDiv.textContent = data.result;
                    resultDiv.style.display = "block";
                    resultDiv.className = "result success";
                } else {
                    resultDiv.textContent = data.error;
                    resultDiv.style.display = "block";
                    resultDiv.className = "result error";
                }
            } catch (error) {
                const resultDiv = document.getElementById("emoji-decode-result");
                resultDiv.textContent = "An error occurred during decoding";
                resultDiv.style.display = "block";
                resultDiv.className = "result error";
            }
        }

        // Image Message Steganography Functions
        async function encodeImage() {
            const imageFile = document.getElementById("image-file-encode").files[0];
            const message = document.getElementById("image-message").value;
            const password = document.getElementById("image-password-encode").value;
            const resultDiv = document.getElementById("image-encode-result");

            if (!imageFile || !message) {
                showResult("image-encode-result", "Please provide an image and message", true);
                return;
            }

            // Show loading state
            resultDiv.innerHTML = `
                <div class="loading-status">
                    <div class="status-message">Encoding image, please wait...</div>
                    <div class="loading-animation"></div>
                </div>
            `;
            resultDiv.style.display = "block";
            resultDiv.className = "result";

            const formData = new FormData();
            formData.append("image", imageFile);
            formData.append("message", message);
            formData.append("password", password);

            try {
                const response = await fetch("/encode_image_message", {
                    method: "POST",
                    body: formData,
                });

                if (response.ok) {
                    const blob = await response.blob();
                    const url = window.URL.createObjectURL(blob);

                    // Show encoded image preview
                    const preview = document.getElementById("image-preview-encode-result");
                    preview.src = url;
                    preview.style.display = "block";

                    // Create download link
                    const resultMessage = `
                        <div>Image encoded successfully!</div>
                        <div style="margin-top: 10px;">
                            <a href="${url}" download="encoded_image.png" class="download-link">
                                Download Encoded Image
                            </a>
                        </div>
                    `;
                    resultDiv.innerHTML = resultMessage;
                    resultDiv.className = "result success";
                } else {
                    const data = await response.json();
                    showResult("image-encode-result", data.error || "Encoding failed", true);
                }
            } catch (error) {
                console.error("Image encoding error:", error);
                showResult("image-encode-result", "An error occurred during encoding: " + error.message, true);
            }
        }

        async function decodeImage() {
            const imageFile = document.getElementById("image-file-decode").files[0];
            const password = document.getElementById("image-password-decode").value;
            const resultDiv = document.getElementById("image-decode-result");

            if (!imageFile) {
                showResult("image-decode-result", "Please provide an image to decode", true);
                return;
            }

            // Show loading state
            resultDiv.innerHTML = `
                <div class="loading-status">
                    <div class="status-message">Decoding image, please wait...</div>
                    <div class="loading-animation"></div>
                </div>
            `;
            resultDiv.style.display = "block";
            resultDiv.className = "result";

            const formData = new FormData();
            formData.append("image", imageFile);
            // Only append password if it's provided
            if (password) {
                formData.append("password", password);
            }

            try {
                const response = await fetch("/decode_image_message", {
                    method: "POST",
                    body: formData,
                });

                const data = await response.json();

                if (response.ok) {
                    // Check if message indicates encryption
                    if (data.message === "This message is encrypted. Please provide a password to decrypt.") {
                        resultDiv.textContent = data.message;
                        resultDiv.className = "result error";
                    } else {
                        resultDiv.textContent = data.message;
                        resultDiv.className = "result success";
                    }
                } else {
                    resultDiv.textContent = data.error || "Failed to decode message";
                    resultDiv.className = "result error";
                }
            } catch (error) {
                console.error("Decoding error:", error);
                resultDiv.textContent = "An error occurred during decoding";
                resultDiv.className = "result error";
            }
        }

        // File in Image Steganography Functions
        async function encodeFile() {
            const carrierFile = document.getElementById("carrier-file-encode").files[0];
            const fileToHide = document.getElementById("hide-file").files[0];
            const resultDiv = document.getElementById("file-encode-result");

            if (!carrierFile || !fileToHide) {
                showResult("file-encode-result", "Please provide both carrier image and file to hide", true);
                return;
            }

            // Show initial loading state
            resultDiv.innerHTML = `
                <div class="loading-status">
                    <div class="status-message">Preparing to encode...</div>
                    <div class="loading-animation"></div>
                </div>
            `;
            resultDiv.style.display = "block";
            resultDiv.className = "result";

            const formData = new FormData();
            formData.append("carrier", carrierFile);
            formData.append("file", fileToHide);

            try {
                // Start the encoding process
                const response = await fetch("/encode_file", {
                    method: "POST",
                    body: formData,
                });

                const data = await response.json();

                if (!response.ok) {
                    showResult("file-encode-result", data.error || "Encoding failed", true);
                    return;
                }

                // Get the task ID for polling
                const taskId = data.task_id;

                // Function to poll for encoding status
                const pollEncodingStatus = async () => {
                    try {
                        const statusResponse = await fetch(`/task_status/${taskId}`);
                        const statusData = await statusResponse.json();

                        if (statusResponse.ok) {
                            // Update the status message
                            resultDiv.innerHTML = `
                                <div class="loading-status">
                                    <div class="status-message">${statusData.status}</div>
                                    <div class="progress-bar" style="background: linear-gradient(to right, var(--neon-blue) ${statusData.progress}%, transparent ${statusData.progress}%); height: 20px; border: 1px solid var(--neon-blue); border-radius: 5px;"></div>
                                    <div style="text-align: center; margin-top: 5px;">${statusData.progress}%</div>
                                </div>
                            `;

                            // If complete, show the final result
                            if (statusData.complete === true) {
                                if (statusData.error) {
                                    showResult("file-encode-result", statusData.error, true);
                                } else {
                                    const resultMessage = `
                                        File encoded successfully!<br>
                                        Original file: ${data.originalFile}<br>
                                        File size: ${data.fileSize} bytes<br>
                                        Bits used: ${data.bitsUsed}<br>
                                        Bits available: ${data.bitsAvailable}
                                    `;
                                    showResult("file-encode-result", resultMessage);

                                    // Display encoded image
                                    const preview = document.getElementById("file-preview-encode-result");
                                    preview.src = `data:image/png;base64,${statusData.image}`;
                                    preview.style.display = "block";
                                }
                                return; // Stop polling
                            }

                            // Continue polling
                            setTimeout(pollEncodingStatus, 1000);
                        } else {
                            showResult("file-encode-result", statusData.error || "Status check failed", true);
                        }
                    } catch (error) {
                        showResult("file-encode-result", `Error checking status: ${error.message}`, true);
                    }
                };

                // Start polling
                setTimeout(pollEncodingStatus, 1000);

            } catch (error) {
                showResult("file-encode-result", "An error occurred during encoding: " + (error.message || "Unknown error"), true);
                console.error("Encoding error:", error);
            }
        }

        async function decodeFile() {
            const imageFile = document.getElementById("carrier-file-decode").files[0];
            const resultDiv = document.getElementById("file-decode-result");

            if (!imageFile) {
                showResult("file-decode-result", "Please provide an encoded image", true);
                return;
            }

            // Show loading state
            resultDiv.innerHTML = `
                <div class="loading-status">
                    <div class="status-message">Preparing to decode...</div>
                    <div class="loading-animation"></div>
                </div>
            `;
            resultDiv.style.display = "block";
            resultDiv.className = "result";

            const formData = new FormData();
            formData.append("image", imageFile);

            try {
                console.log("Starting file decode request...");
                const response = await fetch("/decode_file", {
                    method: "POST",
                    body: formData,
                });
                console.log("Response status:", response.status);

                const data = await response.json();
                console.log("Response data:", data);

                if (!response.ok) {
                    showResult("file-decode-result", data.error || "Decoding failed", true);
                    return;
                }

                // Get the task ID for polling
                const taskId = data.task_id;

                // Function to poll for decoding status
                const pollDecodingStatus = async () => {
                    try {
                        const statusResponse = await fetch(`/task_status/${taskId}`);
                        const statusData = await statusResponse.json();

                        if (statusResponse.ok) {
                            // Update the status message
                            resultDiv.innerHTML = `
                                <div class="loading-status">
                                    <div class="status-message">${statusData.status}</div>
                                    <div class="progress-bar" style="background: linear-gradient(to right, var(--neon-blue) ${statusData.progress}%, transparent ${statusData.progress}%); height: 20px; border: 1px solid var(--neon-blue); border-radius: 5px;"></div>
                                    <div style="text-align: center; margin-top: 5px;">${statusData.progress}%</div>
                                </div>
                            `;

                            // If complete, show the final result
                            if (statusData.complete === true) {
                                if (statusData.error) {
                                    showResult("file-decode-result", statusData.error, true);
                                } else {
                                    const resultMessage = `
                                        <div>File decoded successfully!</div>
                                        <div style="margin-top: 10px;">
                                            <a href="${statusData.downloadPath}" class="download-link">Download Decoded File</a>
                                        </div>
                                    `;
                                    resultDiv.innerHTML = resultMessage;
                                    resultDiv.className = "result success";
                                }
                                return; // Stop polling
                            }

                            // Continue polling
                            setTimeout(pollDecodingStatus, 1000);
                        } else {
                            showResult("file-decode-result", statusData.error || "Status check failed", true);
                        }
                    } catch (error) {
                        showResult("file-decode-result", `Error checking status: ${error.message}`, true);
                    }
                };

                // Start polling
                setTimeout(pollDecodingStatus, 1000);

            } catch (error) {
                console.error("File decoding error:", error);
                showResult("file-decode-result", "An error occurred during decoding: " + error.message, true);
            }
        }

        const emojiData = {
            smileys: [
                "ğŸ˜€", "ğŸ˜ƒ", "ğŸ˜„", "ğŸ˜", "ğŸ˜†", "ğŸ˜…", "ğŸ¤£", "ğŸ˜‚", "ğŸ™‚", "ğŸ™ƒ", "ğŸ˜‰", "ğŸ˜Š",
                "ğŸ˜‡", "ğŸ¥°", "ğŸ˜", "ğŸ¤©", "ğŸ˜˜", "ğŸ˜—", "ğŸ˜š", "ğŸ˜™", "ğŸ˜‹", "ğŸ˜›", "ğŸ˜œ", "ğŸ˜",
                "ğŸ¤‘", "ğŸ¤—", "ğŸ¤­", "ğŸ¤«", "ğŸ¤”", "ğŸ¤", "ğŸ¤¨", "ğŸ˜", "ğŸ˜‘", "ğŸ˜¶", "ğŸ˜", "ğŸ˜’",
                "ğŸ™„", "ğŸ˜¬", "ğŸ¤¥", "ğŸ˜Œ", "ğŸ˜”", "ğŸ˜ª", "ğŸ¤¤", "ğŸ˜´", "ğŸ˜·", "ğŸ¤’", "ğŸ¤•", "ğŸ¤¢",
                "ğŸ¤®", "ğŸ¤§", "ğŸ¥µ", "ğŸ¥¶", "ğŸ¥´", "ğŸ˜µ", "ğŸ¤¯", "ğŸ¤ ", "ğŸ¥³", "ğŸ˜", "ğŸ¤“", "ğŸ§",
                "ğŸ˜•", "ğŸ˜Ÿ", "ğŸ™", "â˜¹ï¸", "ğŸ˜®", "ğŸ˜¯", "ğŸ˜²", "ğŸ˜³", "ğŸ¥º", "ğŸ˜¦", "ğŸ˜§", "ğŸ˜¨",
                "ğŸ˜°", "ğŸ˜¥", "ğŸ˜¢", "ğŸ˜­", "ğŸ˜±", "ğŸ˜–", "ğŸ˜£", "ğŸ˜", "ğŸ˜“", "ğŸ˜©", "ğŸ˜«", "ğŸ¥±",
                "ğŸ˜¤", "ğŸ˜¡", "ğŸ˜ ", "ğŸ¤¬", "ğŸ˜ˆ", "ğŸ‘¿", "ğŸ’€", "â˜ ï¸", "ğŸ’©", "ğŸ¤¡", "ğŸ‘¹", "ğŸ‘º",
                "ğŸ‘»", "ğŸ‘½", "ğŸ‘¾", "ğŸ¤–"
            ],
            animals: [
                "ğŸ¶", "ğŸ±", "ğŸ­", "ğŸ¹", "ğŸ°", "ğŸ¦Š", "ğŸ»", "ğŸ¼", "ğŸ¨", "ğŸ¯", "ğŸ¦", "ğŸ®",
                "ğŸ·", "ğŸ½", "ğŸ¸", "ğŸµ", "ğŸ™ˆ", "ğŸ™‰", "ğŸ™Š", "ğŸ’", "ğŸ”", "ğŸ§", "ğŸ¦", "ğŸ¤",
                "ğŸ£", "ğŸ¥", "ğŸ¦†", "ğŸ¦…", "ğŸ¦‰", "ğŸ¦‡", "ğŸº", "ğŸ—", "ğŸ´", "ğŸ¦„", "ğŸ", "ğŸ›",
                "ğŸ¦‹", "ğŸŒ", "ğŸ", "ğŸœ", "ğŸ¦Ÿ", "ğŸ¦—", "ğŸ•·ï¸", "ğŸ•¸ï¸", "ğŸ¦‚", "ğŸ¢", "ğŸ", "ğŸ¦",
                "ğŸ¦–", "ğŸ¦•", "ğŸ™", "ğŸ¦‘", "ğŸ¦", "ğŸ¦", "ğŸ¦€", "ğŸ¡", "ğŸ ", "ğŸŸ", "ğŸ¬", "ğŸ³",
                "ğŸ‹", "ğŸ¦ˆ", "ğŸŠ", "ğŸ…", "ğŸ†", "ğŸ¦“", "ğŸ¦", "ğŸ¦§", "ğŸ˜", "ğŸ¦›", "ğŸ¦", "ğŸª",
                "ğŸ«", "ğŸ¦’", "ğŸ¦˜", "ğŸƒ", "ğŸ‚", "ğŸ„", "ğŸ", "ğŸ–", "ğŸ", "ğŸ‘", "ğŸ¦™", "ğŸ",
                "ğŸ¦Œ", "ğŸ•", "ğŸ©", "ğŸ¦®", "ğŸ•â€ğŸ¦º", "ğŸˆ", "ğŸ“", "ğŸ¦ƒ", "ğŸ¦š", "ğŸ¦œ", "ğŸ¦¢", "ğŸ¦©",
                "ğŸ•Šï¸", "ğŸ‡", "ğŸ¦", "ğŸ¦¨", "ğŸ¦¡", "ğŸ¦¦", "ğŸ¦¥", "ğŸ", "ğŸ€", "ğŸ¿ï¸", "ğŸ¦”"
            ],
            food: [
                "ğŸ", "ğŸ", "ğŸ", "ğŸŠ", "ğŸ‹", "ğŸŒ", "ğŸ‰", "ğŸ‡", "ğŸ“", "ğŸˆ", "ğŸ’", "ğŸ‘",
                "ğŸ¥­", "ğŸ", "ğŸ¥¥", "ğŸ¥", "ğŸ…", "ğŸ†", "ğŸ¥‘", "ğŸ¥¦", "ğŸ¥¬", "ğŸ¥’", "ğŸŒ¶ï¸", "ğŸŒ½",
                "ğŸ¥•", "ğŸ§„", "ğŸ§…", "ğŸ¥”", "ğŸ ", "ğŸ¥", "ğŸ¥¯", "ğŸ", "ğŸ¥–", "ğŸ¥¨", "ğŸ§€", "ğŸ¥š",
                "ğŸ³", "ğŸ§ˆ", "ğŸ¥", "ğŸ§‡", "ğŸ¥“", "ğŸ¥©", "ğŸ—", "ğŸ–", "ğŸ¦´", "ğŸŒ­", "ğŸ”", "ğŸŸ",
                "ğŸ•", "ğŸ¥ª", "ğŸ¥™", "ğŸ§†", "ğŸŒ®", "ğŸŒ¯", "ğŸ¥—", "ğŸ¥˜", "ğŸ¥«", "ğŸ", "ğŸœ", "ğŸ²",
                "ğŸ›", "ğŸ£", "ğŸ±", "ğŸ¥Ÿ", "ğŸ¦ª", "ğŸ¤", "ğŸ™", "ğŸš", "ğŸ˜", "ğŸ¥", "ğŸ¥ ", "ğŸ¥®",
                "ğŸ¢", "ğŸ¡", "ğŸ§", "ğŸ¨", "ğŸ¦", "ğŸ¥§", "ğŸ§", "ğŸ°", "ğŸ‚", "ğŸ®", "ğŸ­", "ğŸ¬",
                "ğŸ«", "ğŸ¿", "ğŸ©", "ğŸª", "ğŸŒ°", "ğŸ¥œ", "ğŸ¯", "ğŸ¥›", "ğŸ¼", "â˜•", "ğŸµ", "ğŸ§ƒ",
                "ğŸ¥¤", "ğŸ¶", "ğŸº", "ğŸ»", "ğŸ¥‚", "ğŸ·", "ğŸ¥ƒ", "ğŸ¸", "ğŸ¹", "ğŸ§‰", "ğŸ¾", "ğŸ§Š"
            ],
            activities: [
                "âš½", "ğŸ€", "ğŸˆ", "âš¾", "ğŸ¥", "ğŸ¾", "ğŸ", "ğŸ‰", "ğŸ¥", "ğŸ±", "ğŸª€", "ğŸ“",
                "ğŸ¸", "ğŸ’", "ğŸ‘", "ğŸ¥", "ğŸ", "ğŸ¥…", "â›³", "ğŸª", "ğŸ¹", "ğŸ£", "ğŸ¤¿", "ğŸ¥Š",
                "ğŸ¥‹", "ğŸ½", "ğŸ›¹", "ğŸ›¼", "ğŸ›·", "â›¸ï¸", "ğŸ¥Œ", "ğŸ¿", "â›·ï¸", "ğŸ‚", "ğŸª‚", "ğŸ‹ï¸",
                "ğŸ‹ï¸â€â™€ï¸", "ğŸ‹ï¸â€â™‚ï¸", "ğŸ¤¼", "ğŸ¤¼â€â™€ï¸", "ğŸ¤¼â€â™‚ï¸", "ğŸ¤¸", "ğŸ¤¸â€â™€ï¸", "ğŸ¤¸â€â™‚ï¸", "â›¹ï¸", "â›¹ï¸â€â™€ï¸",
                "â›¹ï¸â€â™‚ï¸", "ğŸ¤º", "ğŸ¤¾", "ğŸ¤¾â€â™€ï¸", "ğŸ¤¾â€â™‚ï¸", "ğŸŒï¸", "ğŸŒï¸â€â™€ï¸", "ğŸŒï¸â€â™‚ï¸", "ğŸ‡", "ğŸ§˜", "ğŸ§˜â€â™€ï¸",
                "ğŸ§˜â€â™‚ï¸", "ğŸ„", "ğŸ„â€â™€ï¸", "ğŸ„â€â™‚ï¸", "ğŸŠ", "ğŸŠâ€â™€ï¸", "ğŸŠâ€â™‚ï¸", "ğŸ¤½", "ğŸ¤½â€â™€ï¸", "ğŸ¤½â€â™‚ï¸", "ğŸš£",
                "ğŸš£â€â™€ï¸", "ğŸš£â€â™‚ï¸", "ğŸ§—", "ğŸ§—â€â™€ï¸", "ğŸ§—â€â™‚ï¸", "ğŸšµ", "ğŸšµâ€â™€ï¸", "ğŸšµâ€â™‚ï¸", "ğŸš´", "ğŸš´â€â™€ï¸", "ğŸš´â€â™‚ï¸",
                "ğŸª", "ğŸ­", "ğŸ¨", "ğŸ¬", "ğŸ¤", "ğŸ§", "ğŸ¼", "ğŸ¹", "ğŸ¥", "ğŸ·", "ğŸº", "ğŸ¸",
                "ğŸª•", "ğŸ»", "ğŸ²", "â™Ÿï¸", "ğŸ¯", "ğŸ³", "ğŸ®", "ğŸ°", "ğŸ§©"
            ],
            travel: [
                "ğŸš—", "ğŸš•", "ğŸš™", "ğŸšŒ", "ğŸš", "ğŸï¸", "ğŸš“", "ğŸš‘", "ğŸš’", "ğŸš", "ğŸ›»", "ğŸšš",
                "ğŸš›", "ğŸšœ", "ğŸ¦¯", "ğŸ¦½", "ğŸ¦¼", "ğŸ›´", "ğŸš²", "ğŸ›µ", "ğŸï¸", "ğŸ›º", "ğŸš¨", "ğŸš”",
                "ğŸš", "ğŸš˜", "ğŸš–", "ğŸš¡", "ğŸš ", "ğŸšŸ", "ğŸšƒ", "ğŸš‹", "ğŸš", "ğŸš", "ğŸš„", "ğŸš…",
                "ğŸšˆ", "ğŸš‚", "ğŸš†", "ğŸš‡", "ğŸšŠ", "ğŸš‰", "âœˆï¸", "ğŸ›«", "ğŸ›¬", "ğŸ›©ï¸", "ğŸ’º", "ğŸ›°ï¸",
                "ğŸš€", "ğŸ›¸", "ğŸš", "ğŸ›¶", "â›µ", "ğŸš¤", "ğŸ›¥ï¸", "ğŸ›³ï¸", "â›´ï¸", "ğŸš¢", "âš“", "ğŸš§",
                "â›½", "ğŸš", "ğŸš¦", "ğŸš¥", "ğŸ—ºï¸", "ğŸ—¿", "ğŸ—½", "ğŸ—¼", "ğŸ°", "ğŸ¯", "ğŸŸï¸", "ğŸ¡",
                "ğŸ¢", "ğŸ ", "â›²", "â›±ï¸", "ğŸ–ï¸", "ğŸï¸", "ğŸœï¸", "ğŸŒ‹", "â›°ï¸", "ğŸ”ï¸", "ğŸ—»", "ğŸ•ï¸",
                "â›º", "ğŸ ", "ğŸ¡", "ğŸ˜ï¸", "ğŸšï¸", "ğŸ—ï¸", "ğŸ¢", "ğŸ¬", "ğŸ£", "ğŸ¤", "ğŸ¥", "ğŸ¦",
                "ğŸ¨", "ğŸª", "ğŸ«", "ğŸ©", "ğŸ’’", "ğŸ›ï¸", "â›ª", "ğŸ•Œ", "ğŸ•", "ğŸ›•", "ğŸ•‹", "â›©ï¸",
                "ğŸ›¤ï¸", "ğŸ›£ï¸", "ğŸ—¾", "ğŸ‘", "ğŸï¸", "ğŸŒ…", "ğŸŒ„", "ğŸŒ ", "ğŸ‡", "ğŸ†", "ğŸŒ‡", "ğŸŒ†",
                "ğŸ™ï¸", "ğŸŒƒ", "ğŸŒŒ", "ğŸŒ‰", "ğŸŒ"
            ],
            objects: [
                "âŒš", "ğŸ“±", "ğŸ“²", "ğŸ’»", "âŒ¨ï¸", "ğŸ–¥ï¸", "ğŸ–¨ï¸", "ğŸ–±ï¸", "ğŸ–²ï¸", "ğŸ•¹ï¸", "ğŸ—œï¸", "ğŸ’½",
                "ğŸ’¾", "ğŸ’¿", "ğŸ“€", "ğŸ“¼", "ğŸ“·", "ğŸ“¸", "ğŸ“¹", "ğŸ¥", "ğŸ“½ï¸", "ğŸï¸", "ğŸ“", "â˜ï¸",
                "ğŸ“Ÿ", "ğŸ“ ", "ğŸ“º", "ğŸ“»", "ğŸ™ï¸", "ğŸšï¸", "ğŸ›ï¸", "ğŸ§­", "â±ï¸", "â²ï¸", "â°", "ğŸ•°ï¸",
                "âŒ›", "â³", "ğŸ“¡", "ğŸ”‹", "ğŸ”Œ", "ğŸ’¡", "ğŸ”¦", "ğŸ•¯ï¸", "ğŸª”", "ğŸ§¯", "ğŸ›¢ï¸", "ğŸ’¸",
                "ğŸ’µ", "ğŸ’´", "ğŸ’¶", "ğŸ’·", "ğŸ’°", "ğŸ’³", "ğŸ’", "âš–ï¸", "ğŸ§°", "ğŸ”§", "ğŸ”¨", "âš’ï¸",
                "ğŸ› ï¸", "â›ï¸", "ğŸ”©", "âš™ï¸", "ğŸ§±", "â›“ï¸", "ğŸ§²", "ğŸ”«", "ğŸ’£", "ğŸ§¨", "ğŸª“", "ğŸ”ª",
                "ğŸ—¡ï¸", "âš”ï¸", "ğŸ›¡ï¸", "ğŸš¬", "âš°ï¸", "âš±ï¸", "ğŸº", "ğŸ”®", "ğŸ“¿", "ğŸ§¿", "ğŸ’ˆ", "âš—ï¸",
                "ğŸ”­", "ğŸ”¬", "ğŸ•³ï¸", "ğŸ©¹", "ğŸ©º", "ğŸ’Š", "ğŸ’‰", "ğŸ©¸", "ğŸ§¬", "ğŸ¦ ", "ğŸ§«", "ğŸ§ª",
                "ğŸŒ¡ï¸", "ğŸ§¹", "ğŸ§º", "ğŸ§»", "ğŸš½", "ğŸš°", "ğŸš¿", "ğŸ›", "ğŸ›€", "ğŸ§¼", "ğŸª’", "ğŸ§½",
                "ğŸ§´", "ğŸ›ï¸", "ğŸ”‘", "ğŸ—ï¸", "ğŸšª", "ğŸª‘", "ğŸ›‹ï¸", "ğŸ›ï¸", "ğŸ›Œ", "ğŸ§¸", "ğŸ–¼ï¸", "ğŸ›ï¸",
                "ğŸ›’", "ğŸ", "ğŸˆ", "ğŸ", "ğŸ€", "ğŸŠ", "ğŸ‰", "ğŸ", "ğŸ®", "ğŸ", "ğŸ§§", "âœ‰ï¸",
                "ğŸ“©", "ğŸ“¨", "ğŸ“§", "ğŸ’Œ", "ğŸ“¥", "ğŸ“¤", "ğŸ“¦", "ğŸ·ï¸", "ğŸ“ª", "ğŸ“«", "ğŸ“¬", "ğŸ“­",
                "ğŸ“®", "ğŸ“¯", "ğŸ“œ", "ğŸ“ƒ", "ğŸ“„", "ğŸ“‘", "ğŸ§¾", "ğŸ“Š", "ğŸ“ˆ", "ğŸ“‰", "ğŸ—’ï¸", "ğŸ—“ï¸",
                "ğŸ“†", "ğŸ“…", "ğŸ—‘ï¸", "ğŸ“‡", "ğŸ—ƒï¸", "ğŸ—³ï¸", "ğŸ—„ï¸", "ğŸ“‹", "ğŸ“", "ğŸ“‚", "ğŸ—‚ï¸", "ğŸ—ï¸",
                "ğŸ“°", "ğŸ““", "ğŸ“”", "ğŸ“’", "ğŸ“•", "ğŸ“—", "ğŸ“˜", "ğŸ“™", "ğŸ“š", "ğŸ“–", "ğŸ”–", "ğŸ§·",
                "ğŸ”—", "ğŸ“", "ğŸ–‡ï¸", "ğŸ“", "ğŸ“", "ğŸ§®", "ğŸ“Œ", "ğŸ“", "âœ‚ï¸", "ğŸ–Šï¸", "ğŸ–‹ï¸", "âœ’ï¸",
                "ğŸ–Œï¸", "ğŸ–ï¸", "ğŸ“", "âœï¸", "ğŸ”", "ğŸ”", "ğŸ”", "ğŸ”", "ğŸ”’", "ğŸ”“"
            ],
            symbols: [
                "â¤ï¸", "ğŸ§¡", "ğŸ’›", "ğŸ’š", "ğŸ’™", "ğŸ’œ", "ğŸ–¤", "ğŸ¤", "ğŸ¤", "ğŸ’”", "â£ï¸", "ğŸ’•",
                "ğŸ’", "ğŸ’“", "ğŸ’—", "ğŸ’–", "ğŸ’˜", "ğŸ’", "ğŸ’Ÿ", "â˜®ï¸", "âœï¸", "â˜ªï¸", "ğŸ•‰ï¸", "â˜¸ï¸",
                "âœ¡ï¸", "ğŸ”¯", "ğŸ•", "â˜¯ï¸", "â˜¦ï¸", "ğŸ›", "â›", "â™ˆ", "â™‰", "â™Š", "â™‹", "â™Œ", "â™",
                "â™", "â™", "â™", "â™‘", "â™’", "â™“", "ğŸ†”", "âš›ï¸", "ğŸ‰‘", "â˜¢ï¸", "â˜£ï¸", "ğŸ“´", "ğŸ“³",
                "ğŸˆ¶", "ğŸˆš", "ğŸˆ¸", "ğŸˆº", "ğŸˆ·ï¸", "âœ´ï¸", "ğŸ†š", "ğŸ’®", "ğŸ‰", "ãŠ™ï¸", "ãŠ—ï¸", "ğŸˆ´",
                "ğŸˆµ", "ğŸˆ¹", "ğŸˆ²", "ğŸ…°ï¸", "ğŸ…±ï¸", "ğŸ†", "ğŸ†‘", "ğŸ…¾ï¸", "ğŸ†˜", "âŒ", "â­•", "ğŸ›‘",
                "â›”", "ğŸ“›", "ğŸš«", "ğŸ’¯", "ğŸ’¢", "â™¨ï¸", "ğŸš·", "ğŸš¯", "ğŸš³", "ğŸš±", "ğŸ”", "ğŸ“µ",
                "ğŸš­", "â—", "â•", "â“", "â”", "â€¼ï¸", "â‰ï¸", "ğŸ”…", "ğŸ”†", "ã€½ï¸", "âš ï¸", "ğŸš¸",
                "ğŸ”±", "âšœï¸", "ğŸ”°", "â™»ï¸", "âœ…", "ğŸˆ¯", "ğŸ’¹", "â‡ï¸", "âœ³ï¸", "â", "ğŸŒ", "ğŸ’ ",
                "â“‚ï¸", "ğŸŒ€", "ğŸ’¤", "ğŸ§", "ğŸš¾", "â™¿", "ğŸ…¿ï¸", "ğŸˆ³", "ğŸˆ‚ï¸", "ğŸ›‚", "ğŸ›ƒ", "ğŸ›„",
                "ğŸ›…", "ğŸš¹", "ğŸšº", "ğŸš¼", "âš§", "ğŸš»", "ğŸš®", "ğŸ¦", "ğŸ“¶", "ğŸˆ", "ğŸ”£", "â„¹ï¸",
                "ğŸ”¤", "ğŸ”¡", "ğŸ” ", "ğŸ†–", "ğŸ†—", "ğŸ†™", "ğŸ†’", "ğŸ†•", "ğŸ†“", "0ï¸âƒ£", "1ï¸âƒ£", "2ï¸âƒ£",
                "3ï¸âƒ£", "4ï¸âƒ£", "5ï¸âƒ£", "6ï¸âƒ£", "7ï¸âƒ£", "8ï¸âƒ£", "9ï¸âƒ£", "ğŸ”Ÿ", "ğŸ”¢", "#ï¸âƒ£", "*ï¸âƒ£",
                "âï¸", "â–¶ï¸", "â¸ï¸", "â¯ï¸", "â¹ï¸", "âºï¸", "â­ï¸", "â®ï¸", "â©", "âª", "â«", "â¬",
                "â—€ï¸", "ğŸ”¼", "ğŸ”½", "â¡ï¸", "â¬…ï¸", "â¬†ï¸", "â¬‡ï¸", "â†—ï¸", "â†˜ï¸", "â†™ï¸", "â†–ï¸", "â†•ï¸",
                "â†”ï¸", "â†ªï¸", "â†©ï¸", "â¤´ï¸", "â¤µï¸", "ğŸ”€", "ğŸ”", "ğŸ”‚", "ğŸ”„", "ğŸ”ƒ", "ğŸµ", "ğŸ¶",
                "â•", "â–", "â—", "âœ–ï¸", "â™¾ï¸", "ğŸ’²", "ğŸ’±", "â„¢ï¸", "Â©ï¸", "Â®ï¸", "ğŸ‘ï¸â€ğŸ—¨ï¸", "ğŸ”š",
                "ğŸ”™", "ğŸ”›", "ğŸ”", "ğŸ”œ", "ã€°ï¸", "â°", "â¿", "âœ”ï¸", "â˜‘ï¸", "ğŸ”˜", "ğŸ”´", "ğŸŸ ",
                "ğŸŸ¡", "ğŸŸ¢", "ğŸ”µ", "ğŸŸ£", "âš«", "âšª", "ğŸŸ¤", "ğŸ”º", "ğŸ”»", "ğŸ”¸", "ğŸ”¹", "ğŸ”¶",
                "ğŸ”·", "ğŸ”³", "ğŸ”²", "â–ªï¸", "â–«ï¸", "â—¾", "â—½", "â—¼ï¸", "â—»ï¸", "ğŸŸ¥", "ğŸŸ§", "ğŸŸ¨",
                "ğŸŸ©", "ğŸŸ¦", "ğŸŸª", "â¬›", "â¬œ", "ğŸŸ«", "ğŸ”ˆ", "ğŸ”‡", "ğŸ”‰", "ğŸ”Š", "ğŸ””", "ğŸ”•",
                "ğŸ“£", "ğŸ“¢", "ğŸ’¬", "ğŸ’­", "ğŸ—¯ï¸", "â™ ï¸", "â™£ï¸", "â™¥ï¸", "â™¦ï¸", "ğŸƒ", "ğŸ´", "ğŸ€„"
            ],
            flags: [
                "ğŸ", "ğŸš©", "ğŸŒ", "ğŸ´", "ğŸ³ï¸", "ğŸ³ï¸â€ğŸŒˆ", "ğŸ³ï¸â€âš§ï¸", "ğŸ´â€â˜ ï¸", "ğŸ‡¦ğŸ‡¨", "ğŸ‡¦ğŸ‡©", "ğŸ‡¦ğŸ‡ª",
                "ğŸ‡¦ğŸ‡«", "ğŸ‡¦ğŸ‡¬", "ğŸ‡¦ğŸ‡®", "ğŸ‡¦ğŸ‡±", "ğŸ‡¦ğŸ‡²", "ğŸ‡¦ğŸ‡´", "ğŸ‡¦ğŸ‡¶", "ğŸ‡¦ğŸ‡·", "ğŸ‡¦ğŸ‡¸", "ğŸ‡¦ğŸ‡¹",
                "ğŸ‡¦ğŸ‡º", "ğŸ‡¦ğŸ‡¼", "ğŸ‡¦ğŸ‡½", "ğŸ‡¦ğŸ‡¿", "ğŸ‡§ğŸ‡¦", "ğŸ‡§ğŸ‡§", "ğŸ‡§ğŸ‡©", "ğŸ‡§ğŸ‡ª", "ğŸ‡§ğŸ‡«", "ğŸ‡§ğŸ‡¬",
                "ğŸ‡§ğŸ‡­", "ğŸ‡§ğŸ‡®", "ğŸ‡§ğŸ‡¯", "ğŸ‡§ğŸ‡±", "ğŸ‡§ğŸ‡²", "ğŸ‡§ğŸ‡³", "ğŸ‡§ğŸ‡´", "ğŸ‡§ğŸ‡¶", "ğŸ‡§ğŸ‡·", "ğŸ‡§ğŸ‡¸",
                "ğŸ‡§ğŸ‡¹", "ğŸ‡§ğŸ‡»", "ğŸ‡§ğŸ‡¼", "ğŸ‡§ğŸ‡¾", "ğŸ‡§ğŸ‡¿", "ğŸ‡¨ğŸ‡¦", "ğŸ‡¨ğŸ‡¨", "ğŸ‡¨ğŸ‡©", "ğŸ‡¨ğŸ‡«", "ğŸ‡¨ğŸ‡¬",
                "ğŸ‡¨ğŸ‡­", "ğŸ‡¨ğŸ‡®", "ğŸ‡¨ğŸ‡°", "ğŸ‡¨ğŸ‡±", "ğŸ‡¨ğŸ‡²", "ğŸ‡¨ğŸ‡³", "ğŸ‡¨ğŸ‡´", "ğŸ‡¨ğŸ‡µ", "ğŸ‡¨ğŸ‡·", "ğŸ‡¨ğŸ‡º",
                "ğŸ‡¨ğŸ‡»", "ğŸ‡¨ğŸ‡¼", "ğŸ‡¨ğŸ‡½", "ğŸ‡¨ğŸ‡¾", "ğŸ‡¨ğŸ‡¿", "ğŸ‡©ğŸ‡ª", "ğŸ‡©ğŸ‡¬", "ğŸ‡©ğŸ‡¯", "ğŸ‡©ğŸ‡°", "ğŸ‡©ğŸ‡²",
                "ğŸ‡©ğŸ‡´", "ğŸ‡©ğŸ‡¿", "ğŸ‡ªğŸ‡¦", "ğŸ‡ªğŸ‡¨", "ğŸ‡ªğŸ‡ª", "ğŸ‡ªğŸ‡¬", "ğŸ‡ªğŸ‡­", "ğŸ‡ªğŸ‡·", "ğŸ‡ªğŸ‡¸", "ğŸ‡ªğŸ‡¹",
                "ğŸ‡ªğŸ‡º", "ğŸ‡«ğŸ‡®", "ğŸ‡«ğŸ‡¯", "ğŸ‡«ğŸ‡°", "ğŸ‡«ğŸ‡²", "ğŸ‡«ğŸ‡´", "ğŸ‡«ğŸ‡·", "ğŸ‡¬ğŸ‡¦", "ğŸ‡¬ğŸ‡§", "ğŸ‡¬ğŸ‡©",
                "ğŸ‡¬ğŸ‡ª", "ğŸ‡¬ğŸ‡«", "ğŸ‡¬ğŸ‡¬", "ğŸ‡¬ğŸ‡­", "ğŸ‡¬ğŸ‡®", "ğŸ‡¬ğŸ‡±", "ğŸ‡¬ğŸ‡²", "ğŸ‡¬ğŸ‡³", "ğŸ‡¬ğŸ‡µ", "ğŸ‡¬ğŸ‡¶",
                "ğŸ‡¬ğŸ‡·", "ğŸ‡¬ğŸ‡¸", "ğŸ‡¬ğŸ‡¹", "ğŸ‡¬ğŸ‡º", "ğŸ‡¬ğŸ‡¼", "ğŸ‡¬ğŸ‡¾", "ğŸ‡­ğŸ‡°", "ğŸ‡­ğŸ‡²", "ğŸ‡­ğŸ‡³", "ğŸ‡­ğŸ‡·",
                "ğŸ‡­ğŸ‡¹", "ğŸ‡­ğŸ‡º", "ğŸ‡®ğŸ‡¨", "ğŸ‡®ğŸ‡©", "ğŸ‡®ğŸ‡ª", "ğŸ‡®ğŸ‡±", "ğŸ‡®ğŸ‡²", "ğŸ‡®ğŸ‡³", "ğŸ‡®ğŸ‡´", "ğŸ‡®ğŸ‡¶",
                "ğŸ‡®ğŸ‡·", "ğŸ‡®ğŸ‡¸", "ğŸ‡®ğŸ‡¹", "ğŸ‡¯ğŸ‡ª", "ğŸ‡¯ğŸ‡²", "ğŸ‡¯ğŸ‡´", "ğŸ‡¯ğŸ‡µ", "ğŸ‡°ğŸ‡ª", "ğŸ‡°ğŸ‡¬", "ğŸ‡°ğŸ‡­",
                "ğŸ‡°ğŸ‡®", "ğŸ‡°ğŸ‡²", "ğŸ‡°ğŸ‡³", "ğŸ‡°ğŸ‡µ", "ğŸ‡°ğŸ‡·", "ğŸ‡°ğŸ‡¼", "ğŸ‡°ğŸ‡¾", "ğŸ‡°ğŸ‡¿", "ğŸ‡±ğŸ‡¦", "ğŸ‡±ğŸ‡§",
                "ğŸ‡±ğŸ‡¨", "ğŸ‡±ğŸ‡®", "ğŸ‡±ğŸ‡°", "ğŸ‡±ğŸ‡·", "ğŸ‡±ğŸ‡¸", "ğŸ‡±ğŸ‡¹", "ğŸ‡±ğŸ‡º", "ğŸ‡±ğŸ‡»", "ğŸ‡±ğŸ‡¾", "ğŸ‡²ğŸ‡¦",
                "ğŸ‡²ğŸ‡¨", "ğŸ‡²ğŸ‡©", "ğŸ‡²ğŸ‡ª", "ğŸ‡²ğŸ‡«", "ğŸ‡²ğŸ‡¬", "ğŸ‡²ğŸ‡­", "ğŸ‡²ğŸ‡°", "ğŸ‡²ğŸ‡±", "ğŸ‡²ğŸ‡²", "ğŸ‡²ğŸ‡³",
                "ğŸ‡²ğŸ‡´", "ğŸ‡²ğŸ‡µ", "ğŸ‡²ğŸ‡¶", "ğŸ‡²ğŸ‡·", "ğŸ‡²ğŸ‡¸", "ğŸ‡²ğŸ‡¹", "ğŸ‡²ğŸ‡º", "ğŸ‡²ğŸ‡»", "ğŸ‡²ğŸ‡¼", "ğŸ‡²ğŸ‡½",
                "ğŸ‡²ğŸ‡¾", "ğŸ‡²ğŸ‡¿", "ğŸ‡³ğŸ‡¦", "ğŸ‡³ğŸ‡¨", "ğŸ‡³ğŸ‡ª", "ğŸ‡³ğŸ‡«", "ğŸ‡³ğŸ‡¬", "ğŸ‡³ğŸ‡®", "ğŸ‡³ğŸ‡±", "ğŸ‡³ğŸ‡´",
                "ğŸ‡³ğŸ‡µ", "ğŸ‡³ğŸ‡·", "ğŸ‡³ğŸ‡º", "ğŸ‡³ğŸ‡¿", "ğŸ‡´ğŸ‡²", "ğŸ‡µğŸ‡¦", "ğŸ‡µğŸ‡ª", "ğŸ‡µğŸ‡«", "ğŸ‡µğŸ‡¬", "ğŸ‡µğŸ‡­",
                "ğŸ‡µğŸ‡°", "ğŸ‡µğŸ‡±", "ğŸ‡µğŸ‡²", "ğŸ‡µğŸ‡³", "ğŸ‡µğŸ‡·", "ğŸ‡µğŸ‡¸", "ğŸ‡µğŸ‡¹", "ğŸ‡µğŸ‡¼", "ğŸ‡µğŸ‡¾", "ğŸ‡¶ğŸ‡¦",
                "ğŸ‡·ğŸ‡ª", "ğŸ‡·ğŸ‡´", "ğŸ‡·ğŸ‡¸", "ğŸ‡·ğŸ‡º", "ğŸ‡·ğŸ‡¼", "ğŸ‡¸ğŸ‡¦", "ğŸ‡¸ğŸ‡§", "ğŸ‡¸ğŸ‡¨", "ğŸ‡¸ğŸ‡©", "ğŸ‡¸ğŸ‡ª",
                "ğŸ‡¸ğŸ‡¬", "ğŸ‡¸ğŸ‡­", "ğŸ‡¸ğŸ‡®", "ğŸ‡¸ğŸ‡¯", "ğŸ‡¸ğŸ‡°", "ğŸ‡¸ğŸ‡±", "ğŸ‡¸ğŸ‡²", "ğŸ‡¸ğŸ‡³", "ğŸ‡¸ğŸ‡´", "ğŸ‡¸ğŸ‡·",
                "ğŸ‡¸ğŸ‡¸", "ğŸ‡¸ğŸ‡¹", "ğŸ‡¸ğŸ‡»", "ğŸ‡¸ğŸ‡½", "ğŸ‡¸ğŸ‡¾", "ğŸ‡¸ğŸ‡¿", "ğŸ‡¹ğŸ‡¦", "ğŸ‡¹ğŸ‡¨", "ğŸ‡¹ğŸ‡©", "ğŸ‡¹ğŸ‡«",
                "ğŸ‡¹ğŸ‡¬", "ğŸ‡¹ğŸ‡­", "ğŸ‡¹ğŸ‡¯", "ğŸ‡¹ğŸ‡°", "ğŸ‡¹ğŸ‡±", "ğŸ‡¹ğŸ‡²", "ğŸ‡¹ğŸ‡³", "ğŸ‡¹ğŸ‡´", "ğŸ‡¹ğŸ‡·", "ğŸ‡¹ğŸ‡¹",
                "ğŸ‡¹ğŸ‡»", "ğŸ‡¹ğŸ‡¼", "ğŸ‡¹ğŸ‡¿", "ğŸ‡ºğŸ‡¦", "ğŸ‡ºğŸ‡¬", "ğŸ‡ºğŸ‡²", "ğŸ‡ºğŸ‡³", "ğŸ‡ºğŸ‡¸", "ğŸ‡ºğŸ‡¾", "ğŸ‡ºğŸ‡¿",
                "ğŸ‡»ğŸ‡¦", "ğŸ‡»ğŸ‡¨", "ğŸ‡»ğŸ‡ª", "ğŸ‡»ğŸ‡¬", "ğŸ‡»ğŸ‡®", "ğŸ‡»ğŸ‡³", "ğŸ‡»ğŸ‡º", "ğŸ‡¼ğŸ‡«", "ğŸ‡¼ğŸ‡¸", "ğŸ‡½ğŸ‡°",
                "ğŸ‡¾ğŸ‡ª", "ğŸ‡¾ğŸ‡¹", "ğŸ‡¿ğŸ‡¦", "ğŸ‡¿ğŸ‡²", "ğŸ‡¿ğŸ‡¼"
            ]
        };

        // Function to render emojis
        function renderEmojis(category) {
            const emojiContainer = document.getElementById('emoji-dropdown');
            emojiContainer.innerHTML = '';
            emojiData[category].forEach(emoji => {
                const emojiElement = document.createElement('div');
                emojiElement.className = 'emoji-item';
                emojiElement.textContent = emoji;
                emojiElement.addEventListener('click', () => {
                    document.getElementById('emoji-carrier-encode').value = emoji;
                });
                emojiContainer.appendChild(emojiElement);
            });
        }

        // Initialize emoji dropdown
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize with smileys
            renderEmojis('smileys');
            // Set up category buttons
            document.querySelectorAll('.category-btn').forEach(button => {
                button.addEventListener('click', function() {
                    // Update active button
                    document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    // Render emojis for the selected category
                    renderEmojis(this.dataset.category);
                });
            });
        });
        </script>
    </body>
</html>
